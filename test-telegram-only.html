<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Extension - Telegram Only (No File Download)</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        .test-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .test-section h2 {
            color: #ffd700;
            margin-top: 0;
            font-size: 1.5em;
        }
        button {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        button:active {
            transform: translateY(0);
        }
        .status {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        .success { border-left: 4px solid #4CAF50; }
        .error { border-left: 4px solid #f44336; }
        .info { border-left: 4px solid #2196F3; }
        .warning { border-left: 4px solid #ff9800; }
        .feature-list {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        .feature-list ul {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .feature-list li:before {
            content: "âœ… ";
            margin-right: 10px;
        }
        .telegram-info {
            background: linear-gradient(45deg, #0088cc, #00a8ff);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        .telegram-info h3 {
            margin-top: 0;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ Test Extension - Telegram Only Mode</h1>
        
        <div class="telegram-info">
            <h3>ğŸ“± Telegram Integration</h3>
            <p><strong>Bot Token:</strong> 8349265007:AAEGSWe7kfe7Vw2th02Hs4o4HePMdgtzaJM</p>
            <p><strong>Chat ID:</strong> 709847427</p>
            <p><strong>Mode:</strong> TELEGRAM ONLY - NO FILE DOWNLOAD</p>
        </div>

        <div class="feature-list">
            <h2>ğŸ¯ New Features (Telegram Only Mode)</h2>
            <ul>
                <li>Token Ä‘Æ°á»£c gá»­i qua Telegram thay vÃ¬ táº£i file</li>
                <li>KhÃ´ng cÃ²n táº£i file .txt vá» mÃ¡y ná»¯a</li>
                <li>Token Ä‘Æ°á»£c lÆ°u vÃ o Chrome storage lÃ m backup</li>
                <li>ThÃ´ng bÃ¡o cooldown cÅ©ng Ä‘Æ°á»£c gá»­i qua Telegram</li>
                <li>Extension tá»± Ä‘á»™ng thá»­ láº¡i sau khi háº¿t cooldown</li>
                <li>Giao diá»‡n thÃ´ng bÃ¡o Ä‘Æ°á»£c cáº£i thiá»‡n</li>
            </ul>
        </div>

        <div class="test-section">
            <h2>ğŸ§ª Test Functions</h2>
            <button onclick="testTelegram()">ğŸ“± Test Telegram Send</button>
            <button onclick="startAutoCollection()">ğŸš€ Start Auto Collection</button>
            <button onclick="testFullProcess()">ğŸ”„ Test Full Process</button>
            <button onclick="clearStatus()">ğŸ—‘ï¸ Clear Status</button>
        </div>

        <div class="test-section">
            <h2>ğŸ“Š Status Log</h2>
            <div id="status" class="status info">Ready to test... Click a button above to start testing.</div>
        </div>

        <div class="test-section">
            <h2>ğŸ“‹ Instructions</h2>
            <ol>
                <li><strong>Test Telegram:</strong> Gá»­i token test qua Telegram Ä‘á»ƒ kiá»ƒm tra káº¿t ná»‘i</li>
                <li><strong>Start Auto Collection:</strong> Báº¯t Ä‘áº§u quÃ¡ trÃ¬nh tá»± Ä‘á»™ng láº¥y token</li>
                <li><strong>Test Full Process:</strong> Test toÃ n bá»™ quy trÃ¬nh tá»« Ä‘Äƒng nháº­p Ä‘áº¿n gá»­i Telegram</li>
                <li><strong>Expected Behavior:</strong> Token sáº½ Ä‘Æ°á»£c gá»­i qua Telegram, KHÃ”NG táº£i file vá» mÃ¡y</li>
            </ol>
        </div>
    </div>

    <script>
        function log(message, type = 'info') {
            const status = document.getElementById('status');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${message}\n`;
            status.textContent += logEntry;
            status.className = `status ${type}`;
            status.scrollTop = status.scrollHeight;
        }

        function clearStatus() {
            document.getElementById('status').textContent = 'Status cleared...\n';
            document.getElementById('status').className = 'status info';
        }

        async function testTelegram() {
            log('ğŸ§ª Testing Telegram connection...', 'info');
            
            try {
                const response = await chrome.runtime.sendMessage({
                    action: "testTelegram"
                });
                
                if (response && response.status === "success") {
                    log('âœ… Telegram test successful! Check your Telegram chat.', 'success');
                } else {
                    log(`âŒ Telegram test failed: ${response?.error || 'Unknown error'}`, 'error');
                }
            } catch (error) {
                log(`âŒ Telegram test error: ${error.message}`, 'error');
            }
        }

        async function startAutoCollection() {
            log('ğŸš€ Starting auto collection...', 'info');
            
            try {
                const response = await chrome.runtime.sendMessage({
                    action: "startAutoCollection"
                });
                
                if (response && response.status === "success") {
                    log('âœ… Auto collection started successfully!', 'success');
                    log('ğŸ“± Token will be sent to Telegram (NO FILE DOWNLOAD)', 'info');
                } else {
                    log(`âŒ Auto collection failed: ${response?.error || 'Unknown error'}`, 'error');
                }
            } catch (error) {
                log(`âŒ Auto collection error: ${error.message}`, 'error');
            }
        }

        async function testFullProcess() {
            log('ğŸ”„ Testing full process...', 'info');
            
            try {
                // First, ensure we're on the right page
                if (!window.location.href.includes('tokencursor.io.vn')) {
                    log('âš ï¸ Please navigate to tokencursor.io.vn first', 'warning');
                    return;
                }
                
                const response = await chrome.runtime.sendMessage({
                    action: "startAutoCollection"
                });
                
                if (response && response.status === "success") {
                    log('âœ… Full process test started!', 'success');
                    log('ğŸ“± Expected: Token sent to Telegram, NO file download', 'info');
                } else {
                    log(`âŒ Full process test failed: ${response?.error || 'Unknown error'}`, 'error');
                }
            } catch (error) {
                log(`âŒ Full process test error: ${error.message}`, 'error');
            }
        }

        // Listen for messages from background script
        chrome.runtime.onMessage.addListener((request, sender, sendResponse) => {
            if (request.action === "tokenUpdate") {
                log(`ğŸ“± Token update: ${request.message}`, 'success');
            } else if (request.action === "cooldownUpdate") {
                log(`â° Cooldown update: ${request.message}`, 'warning');
            }
        });

        // Initial log
        log('ğŸ¯ Extension loaded in Telegram Only Mode', 'success');
        log('ğŸ“± Token will be sent to Telegram, NO file download', 'info');
        log('ğŸ”§ Ready for testing...', 'info');
    </script>
</body>
</html>
